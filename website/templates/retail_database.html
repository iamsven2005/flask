{% if current_user.admin == 1 %}
{% extends "base.html" %}
{% else %}
{% extends "based.html" %}
{% endif %}
{% block title %}Shopping Cart{% endblock %}
{% block title %}Library Loan System - Retrieve Retailers{% endblock %}

<!-- Supplier Table -->
{% block content %}
<div class="container-fluid" style="overflow-x: scroll;">
<h1 class="display-4">Retailers</h1>
{% if count == 0 %}
  <br>
  <br>
  <p>There are no retailers in the database.</p>
{% else %}
  <div>
    <table class="table table-striped table-hover">
      <thead>
        <tr>
          <th>ID</th>
          <th>Company ID</th>
          <th>Shop</th>
          <th>Postal code</th>
          <th>Unit number</th>
          <th>Email address</th>
          <th>Address </th>
          <th>Office number</th>
          <th>Year Registered</th>
          <th>
          </th>
        </tr>
      </thead>
      <tbody>
          {% for retailer in retailers_list %}
          <tr>

            <td>{{ retailer.get_retailer_id() }}</td>
            <td>{{ retailer.get_company_id() }}</td>
            <td>{{ retailer.get_location() }}</td>
            <td>{{ retailer.get_postal_code() }}</td>
            <td>{{ retailer.get_unit_number() }}</td>
            <td>{{ retailer.get_email_address() }}</td>
            <td>{{ retailer.get_address() }}</td>
            <td>{{ retailer.get_office_no() }}</td>
            <td>{{ retailer.get_date_registered() }}</td>
          <td>
            {% for user in users %}
                {% if retailer.get_retailer_id()+7 == user.id %}
                <form action="{{ url_for('register_retail_account', id=retailer.get_retailer_id() ) }}" method="POST">
                    <input type="submit" value="Added as retailer" class="btn btn-primary" disabled>
                </form>
                {% endif %}
            {% endfor %}

            {% if retailer.get_retailer_id()+7 > result %}
                <form action="{{ url_for('register_retail_account', id=retailer.get_retailer_id() ) }}" method="POST">
                    <input type="submit" value="Create account" class="btn btn-primary">
                </form>
            {% endif %}
          </td>
            <td>
              <form action="{{url_for('update_retailer', id=retailer.get_retailer_id() )}}" method="POST">
              <input type="submit" value="Update" class="btn btn-warning">
              </form>
            </td>

            <td>
              {% for user in users %}
                  {% if retailer.get_retailer_id()+7 == user.id %}
                  <form action="{{url_for('retailer_delete', id=retailer.get_retailer_id() )}}" method="POST">
                    <input type="submit" value="Delete" class="btn btn-danger" style="display:none;">
                  </form>
                  {% endif %}
              {% endfor %}

              {% if retailer.get_retailer_id()+7 > result %}
                <form action="{{ url_for('retailer_delete', id=retailer.get_retailer_id() ) }}" method="POST">
                    <input type="submit" value="Delete" class="btn btn-danger">
                </form>
              {% endif %}
            </td>


          </tr>
        {% endfor %}


    </tbody>
  </table>
</div>
{% endif %}
</div>
{% endblock %}